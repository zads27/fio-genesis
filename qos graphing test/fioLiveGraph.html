  
<html>
<head>
<script type="text/javascript" src="js/highcharts.js"></script>
<script type="text/javascript" src="js/highcharts-more.js"></script>
<script type="text/javascript" src="js/solid-gauge.js"></script>
<script>
function startTime() {
    var today = new Date();
    var h = today.getHours();
    var m = today.getMinutes();
    var s = today.getSeconds();	
    m = checkTime(m);
    s = checkTime(s);
    document.getElementById('clock').innerHTML =
    h + ":" + m + ":" + s;
    var t = setTimeout(startTime, 500);
}
function checkTime(i) {
    if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
    return i;
}
</script>
</head>
<body onload="startTime()">
<br/>
    <h2 style="text-align:center">
    SK hynix SSD benchmark live demo workloads
    </h2>

<table style="width:100%">
<thead>
<tr>
<td style="text-align:right; font-size:20px; width:33%">WL_534689169899f223e927787f7d0c4fe0.fio</td> 
<td style="text-align:left; font-size:12px; width:33%">Target= /vdb <br>Block= 8k <br>Rnd/Seq= rw <br>Rd/Wr= 70/30</td>
<td style="width:33%"> </td>
</tr>
</thead>
<tbody>
<tr>
        
<td>
<div id="u0container" style="max-width:100%; height: 100%; margin: 0 auto">
</div>
<td>

<td>
<div id="u1container" style="max-width:100%; height: 100%; margin: 0 auto">
</div>
<td>
    
</tr>
</tbody>
</table>
 
<div style="text-align:center">
    <div style="display:inline;">debian 9.9  / FIO v3.12
 / </div>
    <!-- <div id="clock" style="display:inline;"></div> -->
</div>
</body>

<script type="text/javascript">
function loadperf0(callback) {   
    
    var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("text/csv");
    xobj.open('GET', 'WL_534689169899f223e927787f7d0c4fe0.datlive', false); // Replace 'my_data' with the path to your file
    xobj.onreadystatechange = function () {
          //if (xobj.readyState == 4 && xobj.status == 200) {
            // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
            // console.log(xobj.responseText);
            callback(xobj.responseText.split(',')[1]/1000);
          //}
    };
    xobj.send();  
}

Highcharts.chart('u0container', {

    chart: {
        type: 'solidgauge'
    },

    pane: {
        size: '100%',
        startAngle: -120,
        endAngle: 120,
        background: {
            backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
            innerRadius: '60%',
            outerRadius: '100%',
            shape: 'arc'
        }
    },

    title: {
        text: undefined
    },

    tooltip: {
        enabled: false
    },

    credits: {
        enabled: false
    },

    // the value axis
    yAxis: {
        min: 0,
        max: 200,
        title: { text: 'KIOPS' },
        stops: [
            [0.2, '#DF5353'], // red
            [0.5, '#DDDF0D'], // yellow
            [0.8, '#33CC33'] // green
        ],
        lineWidth: 0,
        minorTickInterval: null,
        tickAmount: 2,
        title: {
            y: -70
        },
        labels: {
            y: 30,
            style: {
                fontSize: "20px"
            }
        }
    },

    plotOptions: {
        solidgauge: {
            dataLabels: {
                y: -25,
                borderWidth: 0,
                useHTML: true
            }
        }
    },

    series: [{
        name: 'KIOPS',
        data: [90],
        dataLabels: {
            format: '<div style="text-align:center"><span style="font-size:40px;color:' +
                ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}</span><br/>' +
                   '<span style="font-size:24px;color:#999999">KIOPS</span></div>'
        },
        tooltip: {
            valueSuffix: 'KIOPS'
        }
    }]

},
// Add some life
function (chart) {
    if (!chart.renderer.forExport) {
        setInterval(function (response) {
            var point = chart.series[0].points[0],
                newVal, newJSON;
                loadperf0(function(response) {
                    var data = JSON.parse(response.toString().replace(/'/g,'"'));
                    for (var key in data) {
                        alert(key + ':' + data[key]); 
                    }
                        
                    newVal = parseFloat(response);
                    point.update(newVal);
                });
            point.update(newVal);
            
        }, 1000);
    }
})
</script>

<script type="text/javascript">


function loadperf1(callback) {   

    var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("text/csv");
    xobj.open('GET', 'WL_534689169899f223e927787f7d0c4fe0.datlive', false); // Replace 'my_data' with the path to your file
    xobj.onreadystatechange = function () {
          if (xobj.readyState == 4 && xobj.status == 200) {
            // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
            resp = xobj.responseText;
            resp = resp.slice(resp.indexOf('{'),resp.indexOf('}')+1);
            callback(resp);
          }
    };
    xobj.send();  
};

Highcharts.chart('u1container', {

    chart: {
        type: 'column'
    },

    title: {
        text: undefined
    },

    tooltip: {
        enabled: false
    },

    credits: {
        enabled: false
    },
        
    xAxis: {
        categories: ['99%','99.99%','99.9999%']
    },
      

    // the value axis
    yAxis: {
        type: 'logarithmic',
    },

    plotOptions: {
        solidgauge: {
            dataLabels: {
                y: -25,
                borderWidth: 0,
                useHTML: true
            }
        }
    },

    series: [{
        name: 'Read',
        data: [90,100,5000],
        dataLabels: {
            format: '<div style="text-align:center"><span style="font-size:40px;color:' +
                ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}</span><br/>' +
                   '<span style="font-size:24px;color:#999999">MBPS</span></div>'
        }
        },
        {
            name: 'Write',
            data: [99,230,3000],
            dataLabels: {
                format: '<div style="text-align:center"><span style="font-size:40px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}</span><br/>' +
                       '<span style="font-size:24px;color:#999999">MBPS</span></div>'
            }
        }
        ]

},  
// Add some life
function (chart) {
    if (!chart.renderer.forExport) {
        setInterval(function (response) {
            var point = chart.series[0],
                newVal = [], newJSON;
                loadperf1(function(response) {
                    var data = JSON.parse(response.replace(/'/g,'"'));
                    for (var key in data) {
                        newVal.push(data[key]/1000000); 
                    }
                });    
            console.log(chart.series)
            newVal.sort(function(a,b){return a-b});
            point.update({data:newVal});
            
        }, 5000);
    }
});
</script>
